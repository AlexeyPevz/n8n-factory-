{
  "nodes": [
    {
      "id": "respond-invalid-001",
      "name": "Respond Invalid",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [860, 600],
      "parameters": {
        "functionCode": "const error = {\n  success: false,\n  error: 'Invalid input data. Name/title and phone are required.',\n  receivedData: {\n    hasName: !!($json.enrichedClub?.name || $json.leadData?.title),\n    hasPhone: !!($json.enrichedClub?.phone || $json.leadData?.phone)\n  },\n  timestamp: new Date().toISOString()\n};\n\nconsole.error('WF-03 Validation Error:', error);\n\nreturn [{ json: error }];"
      }
    },
    {
      "id": "respond-invalid-webhook-001",
      "name": "Respond Invalid Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [1060, 600],
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {
          "responseCode": 400
        }
      }
    }
  ],
  "connections": {
    "Validate Input": {
      "main": [
        [{"node": "Prepare Search", "type": "main", "index": 0}],
        [{"node": "Respond Invalid", "type": "main", "index": 0}]
      ]
    },
    "Respond Invalid": {
      "main": [[{"node": "Respond Invalid Webhook", "type": "main", "index": 0}]]
    }
  }
}